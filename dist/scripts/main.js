(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

$(document).ready(function () {

	var updateGraph = function updateGraph(data) {
		var grp = svg.selectAll('g').data(data);

		var selection = grp.selectAll('rect').data(function (d) {
			return d;
		}).attr('fill', function (d, i) {
			return lookup[d[1]];
		});

		selection.enter().append('rect').attr('x', function (d, i) {
			return 28 * i;
		}).attr('width', rw).attr('height', rh);

		selection.exit().remove();
	};

	var renderGraph = function renderGraph(data) {
		// Create a group for each row in the data matrix and
		// translate the group vertically
		var grp = svg.selectAll('g').data(data).enter().append('g').attr('transform', function (d, i) {
			return 'translate(5, ' + 54 * i + ')';
		});

		// For each group, create a set of rectangles and bind
		// them to the inner array (the inner array is already
		// binded to the group)
		grp.selectAll('rect').data(function (d) {
			return d;
		}).enter().append('rect').attr('x', function (d, i) {
			return 28 * i;
		}).attr('fill', function (d, i) {
			return lookup[d[1]];
		}).attr('width', rw).attr('height', rh);

		//Modulo 10 ticks       
		grp.selectAll('line').data(function (d) {
			return d;
		}).enter().append('line').filter(function (d, i) {
			return i % 10 === 0;
		}).attr('x1', function (d, i) {
			return 280 * i + 1;
		}).attr('y1', 20).attr('x2', function (d, i) {
			return 280 * i + 1;
		}).attr('y2', 40).style('stroke', 'black').style('stroke-width', '2px');

		// Text
		grp.selectAll('text').data(function (d) {
			return d;
		}).enter().append('text').filter(function (d, i) {
			return i % 10 === 0;
		}).attr('x', function (d, i) {
			return 280 * i + 5;
		}).attr('y', '38').attr('font-family', 'sans-serif').text(function (d, i, k) {
			return k * 40 + i * 10 + 1;
		});
	};

	// get values
	var getButtonIds = function getButtonIds() {
		return ['#btn-row1-1', '#btn-row1-2', '#btn-row1-3', '#btn-row1-4'];
	};

	var readInput = function readInput() {
		var ids = getButtonIds();
		var out = [];
		for (var i in ids) {
			var val = $(ids[i]).parent().parent().children('input')[0].value;
			out.push(val);
		}
		return out;
	};

	// Redraw Game
	var redraw = function redraw(inpstrarr) {
		var inp = [];
		// parse input
		for (var i = 0; i < inpstrarr.length; i++) {
			inp.push(parseInt(inpstrarr[i]));
		};

		// init values
		var t = 1,
		    // cout value
		data = [],
		    col = undefined,
		    nextEvent = undefined,
		    tmp = 0;

		for (var i = 0; i < inp.length; i++) {
			col = i;
			nextEvent = inp[col];
			if (nextEvent > 0) {
				break;
			}
		}

		for (var k = 0; k < rowN; k += 1) {
			var row = [];
			data.push(row);
			for (var i = 0; i < colN; i += 1) {
				if (t === nextEvent) {
					// jump over 0 color entries
					tmp = col + 1; // black has index 0
					// if something is zero go further
					while (inp[(col + 1) % inp.length] < 1) {
						col = (col + 1) % inp.length;
					}
					nextEvent += inp[(col + 1) % inp.length];
					col = (col + 1) % inp.length; // next color
				} else {
						tmp = 0;
					}
				row.push([t, tmp]);
				t = t + 1;
			}
		}
		return data;
	};

	var registerInputOnChange = function registerInputOnChange() {
		var ids = getButtonIds();
		for (var i in ids) {
			$(ids[i]).parent().parent().children('input.form-control').change(function () {
				var newdata = redraw(readInput());
				updateGraph(newdata);
			});
		}
	};

	// Listen on Menu entry
	var registerButton = function registerButton() {
		var idArr = getButtonIds();
		var ec = jQuery.Event('change');

		var _loop = function _loop(i) {
			$(idArr[i]).parent().children('ul.dropdown-menu').on('click', function (e) {
				$(idArr[i]).parent().parent().children('input.form-control').attr('value', e.target.text)
				//send change event
				.trigger(ec);
			});
		};

		for (var i in idArr) {
			_loop(i);
		}
	};

	var registerPlayButton = function registerPlayButton() {
		$('#playmusicbtn').on('click', function (e) {
			runSeq = true;
			playMusic();
			//alert('here');
		});
	};

	var registerStopButton = function registerStopButton() {
		$('#stopmusicbtn').on('click', function (e) {
			runSeq = false;
			//alert('here');
		});
	};

	// Sound Definition
	var runSeq = true;

	var playSound = function playSound(startTime, pitch, duration, gain) {
		//let startTime = audioContext.currentTime + delay;
		var endTime = startTime + duration;

		var outgain = audioContext.createGain();
		outgain.gain.value = gain;
		outgain.connect(audioContext.destination);

		var envelope = audioContext.createGain();
		envelope.connect(outgain);
		envelope.gain.value = 0;
		envelope.gain.setTargetAtTime(1, startTime, 0.1);
		envelope.gain.setTargetAtTime(0, endTime, 0.2);

		var oscillator = audioContext.createOscillator();
		oscillator.connect(envelope);

		var vibrato = audioContext.createGain();
		vibrato.gain.value = 30;
		vibrato.connect(oscillator.detune);

		var lfo = audioContext.createOscillator();
		lfo.connect(vibrato);
		lfo.frequency.value = 5;

		oscillator.type = 'sawtooth';
		oscillator.detune.value = pitch * 100;
		oscillator.frequency.value = 100;

		oscillator.start(startTime);
		lfo.start(startTime);
		oscillator.stop(endTime + 2);
		lfo.stop(endTime + 2);
	};

	/// Play Loop
	var runSequencers = function runSequencers() {
		if (!runSeq || soundQueue.length === 0) {
			console.log("stop");return;
		}
		var ct = audioContext.currentTime;
		while (soundQueue.length > 0 && soundQueue[0][0] < ct + 0.15) {
			//console.log('ct:'+ct+'planed time:'+soundQueue[0][0]);
			var tone = soundQueue.splice(0, 1);
			playSound(tone[0][0], tone[0][1], tone[0][2], tone[0][3]);
		}
		setTimeout(runSequencers, 90);
	};

	/// sounds start here
	/// Sound var
	var soundQueue = [];
	var audioContext = new AudioContext();
	var soundSpeed = 0.3;
	var sounds = [[-10, 0.5, 0.3], [3, 0.5, 0.7], [10, 0.5, 0.7], [15, 0.5, 0.7], [0, 0.5, 0.7]];

	/// Sound Methods
	var playMusic = function playMusic() {

		// fill soundQueue

		var rectarr = d3.selectAll('rect').data();
		var startTime = audioContext.currentTime;
		//console.log('Start'+startTime);
		soundQueue = [];
		for (var i = 0; i < rectarr.length; i++) {
			var v = rectarr[i][1];
			//playSound(i,sounds[v][0],sounds[v][1],sounds[v][2]);
			//alert(i);
			var tmp = [];
			tmp.push(i * soundSpeed + startTime);
			tmp.push(sounds[v][0]);
			tmp.push(0.2);
			tmp.push(sounds[v][2]);
			soundQueue.push(tmp);
		}

		//console.log('startsequencer'+audioContext.currentTime);
		runSequencers();
	};

	// Init Screen
	var width = 1230,
	    height = 400,
	    div = d3.select('#chart'),
	    svg = div.append('svg').attr('width', width).attr('height', height),
	   
	//grid   
	rw = 20,
	    rh = 20,
	    rowN = 4,
	    colN = 40,
	   
	//colordefinition
	lookup = ['black', '#296EAA', '#D43F3A', '#5CB85C', '#46B0CF'],
	    rrange = lookup.length;

	// React on Changes of the input fields

	registerButton();
	registerInputOnChange();
	var mydata = redraw(readInput());
	renderGraph(mydata);
	registerPlayButton();
	registerStopButton();
});

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvc2NyaXB0cy9tYWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQSxFQUFFLFFBQUYsRUFBWSxLQUFaLENBQWtCLFlBQVU7O0FBRTVCLEtBQUksY0FBYyxTQUFkLFdBQWMsQ0FBQyxJQUFELEVBQVM7QUFDMUIsTUFBSSxNQUFNLElBQUksU0FBSixDQUFjLEdBQWQsRUFDTCxJQURLLENBQ0EsSUFEQSxDQUFOLENBRHNCOztBQUkxQixNQUFJLFlBQVksSUFBSSxTQUFKLENBQWMsTUFBZCxFQUFzQixJQUF0QixDQUEyQixVQUFDLENBQUQ7VUFBTztHQUFQLENBQTNCLENBQ2QsSUFEYyxDQUNULE1BRFMsRUFDRCxVQUFDLENBQUQsRUFBRyxDQUFIO1VBQVMsT0FBTyxFQUFFLENBQUYsQ0FBUDtHQUFULENBRFgsQ0FKc0I7O0FBTzFCLFlBQVUsS0FBVixHQUNFLE1BREYsQ0FDUyxNQURULEVBRUssSUFGTCxDQUVVLEdBRlYsRUFFZSxVQUFDLENBQUQsRUFBSSxDQUFKO1VBQVcsS0FBSyxDQUFMO0dBQVgsQ0FGZixDQUdLLElBSEwsQ0FHVSxPQUhWLEVBR21CLEVBSG5CLEVBSUssSUFKTCxDQUlVLFFBSlYsRUFJb0IsRUFKcEIsRUFQMEI7O0FBYTFCLFlBQVUsSUFBVixHQUFpQixNQUFqQixHQWIwQjtFQUFULENBRlU7O0FBa0I1QixLQUFJLGNBQWMsU0FBZCxXQUFjLENBQUMsSUFBRCxFQUFVOzs7QUFHM0IsTUFBSSxNQUFNLElBQUksU0FBSixDQUFjLEdBQWQsRUFDTCxJQURLLENBQ0EsSUFEQSxFQUVMLEtBRkssR0FHTCxNQUhLLENBR0UsR0FIRixFQUlMLElBSkssQ0FJQSxXQUpBLEVBSWEsVUFBQyxDQUFELEVBQUksQ0FBSjtVQUFVLGtCQUFrQixLQUFLLENBQUwsR0FBUyxHQUEzQjtHQUFWLENBSm5COzs7OztBQUh1QixLQVkzQixDQUFJLFNBQUosQ0FBYyxNQUFkLEVBQ0ssSUFETCxDQUNVLFVBQUMsQ0FBRDtVQUFPO0dBQVAsQ0FEVixDQUVLLEtBRkwsR0FHSyxNQUhMLENBR1ksTUFIWixFQUlTLElBSlQsQ0FJYyxHQUpkLEVBSW1CLFVBQUMsQ0FBRCxFQUFJLENBQUo7VUFBVyxLQUFLLENBQUw7R0FBWCxDQUpuQixDQUtTLElBTFQsQ0FLYyxNQUxkLEVBS3NCLFVBQUMsQ0FBRCxFQUFHLENBQUg7VUFBUyxPQUFPLEVBQUUsQ0FBRixDQUFQO0dBQVQsQ0FMdEIsQ0FNUyxJQU5ULENBTWMsT0FOZCxFQU11QixFQU52QixFQU9TLElBUFQsQ0FPYyxRQVBkLEVBT3dCLEVBUHhCOzs7QUFaMkIsS0FzQjNCLENBQUksU0FBSixDQUFjLE1BQWQsRUFDSyxJQURMLENBQ1csVUFBQyxDQUFEO1VBQU87R0FBUCxDQURYLENBRUssS0FGTCxHQUVhLE1BRmIsQ0FFb0IsTUFGcEIsRUFHSyxNQUhMLENBR1ksVUFBQyxDQUFELEVBQUcsQ0FBSDtVQUFTLElBQUUsRUFBRixLQUFPLENBQVA7R0FBVCxDQUhaLENBSUssSUFKTCxDQUlVLElBSlYsRUFJaUIsVUFBQyxDQUFELEVBQUksQ0FBSjtVQUFVLE1BQU0sQ0FBTixHQUFRLENBQVI7R0FBVixDQUpqQixDQUtLLElBTEwsQ0FLVSxJQUxWLEVBS2dCLEVBTGhCLEVBTUssSUFOTCxDQU1VLElBTlYsRUFNZ0IsVUFBQyxDQUFELEVBQUksQ0FBSjtVQUFVLE1BQU0sQ0FBTixHQUFRLENBQVI7R0FBVixDQU5oQixDQU9LLElBUEwsQ0FPVSxJQVBWLEVBT2UsRUFQZixFQVFLLEtBUkwsQ0FRVyxRQVJYLEVBUXFCLE9BUnJCLEVBU0ssS0FUTCxDQVNXLGNBVFgsRUFTMEIsS0FUMUI7OztBQXRCMkIsS0FrQ3pCLENBQUksU0FBSixDQUFjLE1BQWQsRUFDRyxJQURILENBQ1MsVUFBQyxDQUFEO1VBQU87R0FBUCxDQURULENBRUcsS0FGSCxHQUVXLE1BRlgsQ0FFa0IsTUFGbEIsRUFHRyxNQUhILENBR1UsVUFBQyxDQUFELEVBQUcsQ0FBSDtVQUFTLElBQUUsRUFBRixLQUFPLENBQVA7R0FBVCxDQUhWLENBSUksSUFKSixDQUlTLEdBSlQsRUFJYyxVQUFDLENBQUQsRUFBSSxDQUFKLEVBQVU7QUFBRSxVQUFPLE1BQU0sQ0FBTixHQUFRLENBQVIsQ0FBVDtHQUFWLENBSmQsQ0FLSSxJQUxKLENBS1MsR0FMVCxFQUtjLElBTGQsRUFNSSxJQU5KLENBTVMsYUFOVCxFQU13QixZQU54QixFQU9JLElBUEosQ0FPVSxVQUFDLENBQUQsRUFBSSxDQUFKLEVBQU0sQ0FBTjtVQUFZLElBQUUsRUFBRixHQUFLLElBQUUsRUFBRixHQUFLLENBQVY7R0FBWixDQVBWLENBbEN5QjtFQUFWOzs7QUFsQlUsS0ErRHhCLGVBQWUsU0FBZixZQUFlO1NBQU0sQ0FBQyxhQUFELEVBQWUsYUFBZixFQUE2QixhQUE3QixFQUEyQyxhQUEzQztFQUFOLENBL0RTOztBQWlFNUIsS0FBSSxZQUFZLFNBQVosU0FBWSxHQUFNO0FBQ3JCLE1BQUksTUFBTSxjQUFOLENBRGlCO0FBRXJCLE1BQUksTUFBTSxFQUFOLENBRmlCO0FBR3JCLE9BQUssSUFBSSxDQUFKLElBQVMsR0FBZCxFQUFtQjtBQUNsQixPQUFJLE1BQU0sRUFBRSxJQUFJLENBQUosQ0FBRixFQUNMLE1BREssR0FFTCxNQUZLLEdBR0wsUUFISyxDQUdJLE9BSEosRUFHYSxDQUhiLEVBR2dCLEtBSGhCLENBRFE7QUFLbEIsT0FBSSxJQUFKLENBQVMsR0FBVCxFQUxrQjtHQUFuQjtBQU9BLFNBQU8sR0FBUCxDQVZxQjtFQUFOOzs7QUFqRVksS0ErRXhCLFNBQVMsU0FBVCxNQUFTLENBQUMsU0FBRCxFQUFlO0FBQzNCLE1BQUksTUFBTSxFQUFOOztBQUR1QixPQUd0QixJQUFJLElBQUksQ0FBSixFQUFPLElBQUksVUFBVSxNQUFWLEVBQWtCLEdBQXRDLEVBQTBDO0FBQ3pDLE9BQUksSUFBSixDQUFTLFNBQVMsVUFBVSxDQUFWLENBQVQsQ0FBVCxFQUR5QztHQUExQzs7O0FBSDJCLE1BUXZCLElBQUksQ0FBSjs7QUFDSCxTQUFPLEVBQVA7TUFDQSxlQUZEO01BR0MscUJBSEQ7TUFJQyxNQUFNLENBQU4sQ0FaMEI7O0FBYzNCLE9BQUssSUFBSSxJQUFJLENBQUosRUFBTyxJQUFJLElBQUksTUFBSixFQUFZLEdBQWhDLEVBQW9DO0FBQ25DLFNBQU0sQ0FBTixDQURtQztBQUVuQyxlQUFZLElBQUksR0FBSixDQUFaLENBRm1DO0FBR25DLE9BQUksWUFBWSxDQUFaLEVBQWM7QUFDakIsVUFEaUI7SUFBbEI7R0FIRDs7QUFRQSxPQUFLLElBQUksSUFBSSxDQUFKLEVBQU8sSUFBSSxJQUFKLEVBQVUsS0FBSyxDQUFMLEVBQVE7QUFDakMsT0FBSSxNQUFNLEVBQU4sQ0FENkI7QUFFakMsUUFBSyxJQUFMLENBQVUsR0FBVixFQUZpQztBQUdqQyxRQUFLLElBQUksSUFBSSxDQUFKLEVBQU8sSUFBSSxJQUFKLEVBQVUsS0FBSSxDQUFKLEVBQU07QUFDL0IsUUFBSSxNQUFPLFNBQVAsRUFBaUI7O0FBRXBCLFdBQU0sTUFBSSxDQUFKOztBQUZjLFlBSWIsSUFBSSxDQUFDLE1BQUksQ0FBSixDQUFELEdBQVEsSUFBSSxNQUFKLENBQVosR0FBMEIsQ0FBMUIsRUFBNEI7QUFDbEMsWUFBTSxDQUFDLE1BQUksQ0FBSixDQUFELEdBQVEsSUFBSSxNQUFKLENBRG9CO01BQW5DO0FBR0Esa0JBQWEsSUFBSSxDQUFDLE1BQUksQ0FBSixDQUFELEdBQVEsSUFBSSxNQUFKLENBQXpCLENBUG9CO0FBUXBCLFdBQU0sQ0FBQyxNQUFJLENBQUosQ0FBRCxHQUFRLElBQUksTUFBSjtBQVJNLEtBQXJCLE1BU087QUFDTixZQUFNLENBQU4sQ0FETTtNQVRQO0FBWUEsUUFBSSxJQUFKLENBQVMsQ0FBQyxDQUFELEVBQUksR0FBSixDQUFULEVBYitCO0FBYy9CLFFBQUksSUFBSSxDQUFKLENBZDJCO0lBQWhDO0dBSEQ7QUFvQkEsU0FBTyxJQUFQLENBMUMyQjtFQUFmLENBL0VlOztBQTZINUIsS0FBSSx3QkFBd0IsU0FBeEIscUJBQXdCLEdBQU07QUFDakMsTUFBSSxNQUFNLGNBQU4sQ0FENkI7QUFFakMsT0FBSyxJQUFJLENBQUosSUFBUyxHQUFkLEVBQW1CO0FBQ2xCLEtBQUUsSUFBSSxDQUFKLENBQUYsRUFDRSxNQURGLEdBRUUsTUFGRixHQUdFLFFBSEYsQ0FHVyxvQkFIWCxFQUlFLE1BSkYsQ0FJUyxZQUFNO0FBQ2IsUUFBSSxVQUFVLE9BQU8sV0FBUCxDQUFWLENBRFM7QUFFYixnQkFBWSxPQUFaLEVBRmE7SUFBTixDQUpULENBRGtCO0dBQW5CO0VBRjJCOzs7QUE3SEEsS0E0SXhCLGlCQUFpQixTQUFqQixjQUFpQixHQUFNO0FBQzFCLE1BQUksUUFBUSxjQUFSLENBRHNCO0FBRTFCLE1BQUksS0FBSyxPQUFPLEtBQVAsQ0FBYyxRQUFkLENBQUwsQ0FGc0I7OzZCQUdkO0FBQ1IsS0FBRSxNQUFNLENBQU4sQ0FBRixFQUNELE1BREMsR0FFRCxRQUZDLENBRVEsa0JBRlIsRUFHRCxFQUhDLENBR0UsT0FIRixFQUdXLFVBQUMsQ0FBRCxFQUFPO0FBQ25CLE1BQUUsTUFBTSxDQUFOLENBQUYsRUFDQyxNQURELEdBRUMsTUFGRCxHQUdDLFFBSEQsQ0FHVSxvQkFIVixFQUlDLElBSkQsQ0FJTSxPQUpOLEVBSWMsRUFBRSxNQUFGLENBQVMsSUFBVDs7QUFKZCxLQU1DLE9BTkQsQ0FNUyxFQU5ULEVBRG1CO0lBQVAsQ0FIWDtJQUpzQjs7QUFHdkIsT0FBSyxJQUFJLENBQUosSUFBUyxLQUFkLEVBQXFCO1NBQVosR0FBWTtHQUFyQjtFQUhpQixDQTVJTzs7QUErSjVCLEtBQUkscUJBQXFCLFNBQXJCLGtCQUFxQixHQUFNO0FBQzlCLElBQUUsZUFBRixFQUFtQixFQUFuQixDQUFzQixPQUF0QixFQUErQixVQUFDLENBQUQsRUFBTztBQUNyQyxZQUFTLElBQVQsQ0FEcUM7QUFFckM7O0FBRnFDLEdBQVAsQ0FBL0IsQ0FEOEI7RUFBTixDQS9KRzs7QUF3SzVCLEtBQUkscUJBQXFCLFNBQXJCLGtCQUFxQixHQUFNO0FBQzlCLElBQUUsZUFBRixFQUFtQixFQUFuQixDQUFzQixPQUF0QixFQUErQixVQUFDLENBQUQsRUFBTztBQUNyQyxZQUFTLEtBQVQ7O0FBRHFDLEdBQVAsQ0FBL0IsQ0FEOEI7RUFBTjs7O0FBeEtHLEtBZ0x4QixTQUFTLElBQVQsQ0FoTHdCOztBQWtMNUIsS0FBSSxZQUFZLFNBQVosU0FBWSxDQUFDLFNBQUQsRUFBWSxLQUFaLEVBQW1CLFFBQW5CLEVBQTZCLElBQTdCLEVBQXNDOztBQUVuRCxNQUFJLFVBQVUsWUFBWSxRQUFaLENBRnFDOztBQUluRCxNQUFJLFVBQVUsYUFBYSxVQUFiLEVBQVYsQ0FKK0M7QUFLbkQsVUFBUSxJQUFSLENBQWEsS0FBYixHQUFxQixJQUFyQixDQUxtRDtBQU1uRCxVQUFRLE9BQVIsQ0FBZ0IsYUFBYSxXQUFiLENBQWhCLENBTm1EOztBQVNuRCxNQUFJLFdBQVcsYUFBYSxVQUFiLEVBQVgsQ0FUK0M7QUFVbkQsV0FBUyxPQUFULENBQWlCLE9BQWpCLEVBVm1EO0FBV25ELFdBQVMsSUFBVCxDQUFjLEtBQWQsR0FBc0IsQ0FBdEIsQ0FYbUQ7QUFZbkQsV0FBUyxJQUFULENBQWMsZUFBZCxDQUE4QixDQUE5QixFQUFpQyxTQUFqQyxFQUE0QyxHQUE1QyxFQVptRDtBQWFuRCxXQUFTLElBQVQsQ0FBYyxlQUFkLENBQThCLENBQTlCLEVBQWlDLE9BQWpDLEVBQTBDLEdBQTFDLEVBYm1EOztBQWVuRCxNQUFJLGFBQWEsYUFBYSxnQkFBYixFQUFiLENBZitDO0FBZ0JuRCxhQUFXLE9BQVgsQ0FBbUIsUUFBbkIsRUFoQm1EOztBQWtCckQsTUFBSSxVQUFVLGFBQWEsVUFBYixFQUFWLENBbEJpRDtBQW1CckQsVUFBUSxJQUFSLENBQWEsS0FBYixHQUFxQixFQUFyQixDQW5CcUQ7QUFvQnJELFVBQVEsT0FBUixDQUFnQixXQUFXLE1BQVgsQ0FBaEIsQ0FwQnFEOztBQXVCckQsTUFBSSxNQUFNLGFBQWEsZ0JBQWIsRUFBTixDQXZCaUQ7QUF3QnJELE1BQUksT0FBSixDQUFZLE9BQVosRUF4QnFEO0FBeUJyRCxNQUFJLFNBQUosQ0FBYyxLQUFkLEdBQXFCLENBQXJCLENBekJxRDs7QUEyQm5ELGFBQVcsSUFBWCxHQUFrQixVQUFsQixDQTNCbUQ7QUE0Qm5ELGFBQVcsTUFBWCxDQUFrQixLQUFsQixHQUEwQixRQUFRLEdBQVIsQ0E1QnlCO0FBNkJuRCxhQUFXLFNBQVgsQ0FBcUIsS0FBckIsR0FBNkIsR0FBN0IsQ0E3Qm1EOztBQStCbkQsYUFBVyxLQUFYLENBQWlCLFNBQWpCLEVBL0JtRDtBQWdDbkQsTUFBSSxLQUFKLENBQVUsU0FBVixFQWhDbUQ7QUFpQ25ELGFBQVcsSUFBWCxDQUFnQixVQUFVLENBQVYsQ0FBaEIsQ0FqQ21EO0FBa0NuRCxNQUFJLElBQUosQ0FBUyxVQUFVLENBQVYsQ0FBVCxDQWxDbUQ7RUFBdEM7OztBQWxMWSxLQXdOeEIsZ0JBQWdCLFNBQWhCLGFBQWdCLEdBQU07QUFDekIsTUFBSSxDQUFDLE1BQUQsSUFBVyxXQUFXLE1BQVgsS0FBc0IsQ0FBdEIsRUFBd0I7QUFBQyxXQUFRLEdBQVIsQ0FBWSxNQUFaLEVBQUQ7R0FBdkM7QUFDQSxNQUFJLEtBQUssYUFBYSxXQUFiLENBRmdCO0FBR3pCLFNBQU8sV0FBVyxNQUFYLEdBQWtCLENBQWxCLElBQXVCLFdBQVcsQ0FBWCxFQUFjLENBQWQsSUFBa0IsS0FBRyxJQUFILEVBQVE7O0FBRXZELE9BQUksT0FBTyxXQUFXLE1BQVgsQ0FBa0IsQ0FBbEIsRUFBb0IsQ0FBcEIsQ0FBUCxDQUZtRDtBQUd2RCxhQUFVLEtBQUssQ0FBTCxFQUFRLENBQVIsQ0FBVixFQUFxQixLQUFLLENBQUwsRUFBUSxDQUFSLENBQXJCLEVBQWdDLEtBQUssQ0FBTCxFQUFRLENBQVIsQ0FBaEMsRUFBMkMsS0FBSyxDQUFMLEVBQVEsQ0FBUixDQUEzQyxFQUh1RDtHQUF4RDtBQU1BLGFBQVcsYUFBWCxFQUF5QixFQUF6QixFQVR5QjtFQUFOOzs7O0FBeE5RLEtBdU94QixhQUFhLEVBQWIsQ0F2T3dCO0FBd081QixLQUFJLGVBQWUsSUFBSSxZQUFKLEVBQWYsQ0F4T3dCO0FBeU81QixLQUFJLGFBQWEsR0FBYixDQXpPd0I7QUEwTzVCLEtBQUksU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFELEVBQUssR0FBTixFQUFVLEdBQVYsQ0FBRCxFQUFnQixDQUFDLENBQUQsRUFBSSxHQUFKLEVBQVEsR0FBUixDQUFoQixFQUE2QixDQUFDLEVBQUQsRUFBSyxHQUFMLEVBQVMsR0FBVCxDQUE3QixFQUEyQyxDQUFDLEVBQUQsRUFBSyxHQUFMLEVBQVMsR0FBVCxDQUEzQyxFQUF5RCxDQUFDLENBQUQsRUFBSSxHQUFKLEVBQVEsR0FBUixDQUF6RCxDQUFUOzs7QUExT3dCLEtBK094QixZQUFZLFNBQVosU0FBWSxHQUFNOzs7O0FBS3JCLE1BQUksVUFBVSxHQUFHLFNBQUgsQ0FBYSxNQUFiLEVBQXFCLElBQXJCLEVBQVYsQ0FMaUI7QUFNbEIsTUFBSSxZQUFZLGFBQWEsV0FBYjs7QUFORSxZQVFsQixHQUFZLEVBQVosQ0FSa0I7QUFTckIsT0FBSyxJQUFJLElBQUUsQ0FBRixFQUFLLElBQUksUUFBUSxNQUFSLEVBQWdCLEdBQWxDLEVBQXVDO0FBQ3RDLE9BQUksSUFBSSxRQUFRLENBQVIsRUFBVyxDQUFYLENBQUo7OztBQURrQyxPQUlsQyxNQUFNLEVBQU4sQ0FKa0M7QUFLdEMsT0FBSSxJQUFKLENBQVMsSUFBRSxVQUFGLEdBQWEsU0FBYixDQUFULENBTHNDO0FBTXRDLE9BQUksSUFBSixDQUFTLE9BQU8sQ0FBUCxFQUFVLENBQVYsQ0FBVCxFQU5zQztBQU90QyxPQUFJLElBQUosQ0FBUyxHQUFULEVBUHNDO0FBUXRDLE9BQUksSUFBSixDQUFTLE9BQU8sQ0FBUCxFQUFVLENBQVYsQ0FBVCxFQVJzQztBQVN0QyxjQUFXLElBQVgsQ0FBZ0IsR0FBaEIsRUFUc0M7R0FBdkM7OztBQVRxQixlQXNCbEIsR0F0QmtCO0VBQU47OztBQS9PWSxLQTJRdkIsUUFBUSxJQUFSO0tBQ0QsU0FBUyxHQUFUO0tBQ0EsTUFBTSxHQUFHLE1BQUgsQ0FBVSxRQUFWLENBQU47S0FDQSxNQUFNLElBQUksTUFBSixDQUFXLEtBQVgsRUFDRCxJQURDLENBQ0ksT0FESixFQUNhLEtBRGIsRUFFRCxJQUZDLENBRUksUUFGSixFQUVjLE1BRmQsQ0FBTjs7O0FBSUEsTUFBSyxFQUFMO0tBQ0EsS0FBSyxFQUFMO0tBQ0EsT0FBTSxDQUFOO0tBQ0EsT0FBTSxFQUFOOzs7QUFFQSxVQUFTLENBQUMsT0FBRCxFQUFTLFNBQVQsRUFBbUIsU0FBbkIsRUFBNkIsU0FBN0IsRUFBdUMsU0FBdkMsQ0FBVDtLQUNBLFNBQVMsT0FBTyxNQUFQOzs7O0FBeFJlLGVBNFIzQixHQTVSMkI7QUE2UjNCLHlCQTdSMkI7QUE4UjNCLEtBQUksU0FBUyxPQUFPLFdBQVAsQ0FBVCxDQTlSdUI7QUErUjNCLGFBQVksTUFBWixFQS9SMkI7QUFnUzNCLHNCQWhTMkI7QUFpUzNCLHNCQWpTMkI7Q0FBVixDQUFsQiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xuXG5sZXQgdXBkYXRlR3JhcGggPSAoZGF0YSkgPT57XG5cdGxldCBncnAgPSBzdmcuc2VsZWN0QWxsKCdnJylcblx0ICAgIC5kYXRhKGRhdGEpO1xuXG5cdGxldCBzZWxlY3Rpb24gPSBncnAuc2VsZWN0QWxsKCdyZWN0JykuZGF0YSgoZCkgPT4gZClcblx0XHQuYXR0cignZmlsbCcsIChkLGkpID0+IGxvb2t1cFtkWzFdXSk7XG5cblx0c2VsZWN0aW9uLmVudGVyKClcblx0XHQuYXBwZW5kKCdyZWN0Jylcblx0ICAgIC5hdHRyKCd4JywgKGQsIGkpID0+ICAyOCAqIGkpXG5cdCAgICAuYXR0cignd2lkdGgnLCBydylcblx0ICAgIC5hdHRyKCdoZWlnaHQnLCByaCk7XG5cblx0c2VsZWN0aW9uLmV4aXQoKS5yZW1vdmUoKTsgICAgXG59O1xuXG5sZXQgcmVuZGVyR3JhcGggPSAoZGF0YSkgPT4ge1xuXHQvLyBDcmVhdGUgYSBncm91cCBmb3IgZWFjaCByb3cgaW4gdGhlIGRhdGEgbWF0cml4IGFuZFxuXHQvLyB0cmFuc2xhdGUgdGhlIGdyb3VwIHZlcnRpY2FsbHlcblx0bGV0IGdycCA9IHN2Zy5zZWxlY3RBbGwoJ2cnKVxuXHQgICAgLmRhdGEoZGF0YSlcblx0ICAgIC5lbnRlcigpXG5cdCAgICAuYXBwZW5kKCdnJylcblx0ICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAoZCwgaSkgPT4gJ3RyYW5zbGF0ZSg1LCAnICsgNTQgKiBpICsgJyknKTtcblxuXHQvLyBGb3IgZWFjaCBncm91cCwgY3JlYXRlIGEgc2V0IG9mIHJlY3RhbmdsZXMgYW5kIGJpbmQgXG5cdC8vIHRoZW0gdG8gdGhlIGlubmVyIGFycmF5ICh0aGUgaW5uZXIgYXJyYXkgaXMgYWxyZWFkeVxuXHQvLyBiaW5kZWQgdG8gdGhlIGdyb3VwKVxuXHRncnAuc2VsZWN0QWxsKCdyZWN0Jylcblx0ICAgIC5kYXRhKChkKSA9PiBkKVxuXHQgICAgLmVudGVyKClcblx0ICAgIC5hcHBlbmQoJ3JlY3QnKVxuXHQgICAgICAgIC5hdHRyKCd4JywgKGQsIGkpID0+ICAyOCAqIGkpXG5cdCAgICAgICAgLmF0dHIoJ2ZpbGwnLCAoZCxpKSA9PiBsb29rdXBbZFsxXV0pXG5cdCAgICAgICAgLmF0dHIoJ3dpZHRoJywgcncpXG5cdCAgICAgICAgLmF0dHIoJ2hlaWdodCcsIHJoKTsgICAgIFxuXG5cdC8vTW9kdWxvIDEwIHRpY2tzICAgICAgICBcblx0Z3JwLnNlbGVjdEFsbCgnbGluZScpXG5cdCAgICAuZGF0YSggKGQpID0+IGQpXG5cdCAgICAuZW50ZXIoKS5hcHBlbmQoJ2xpbmUnKVxuXHQgICAgLmZpbHRlcigoZCxpKSA9PiBpJTEwPT09MClcbiAgXHRcdFx0LmF0dHIoJ3gxJywgIChkLCBpKSA9PiAyODAgKiBpKzEpXG4gIFx0XHRcdC5hdHRyKCd5MScsIDIwKVxuICBcdFx0XHQuYXR0cigneDInLCAoZCwgaSkgPT4gMjgwICogaSsxKVxuICBcdFx0XHQuYXR0cigneTInLDQwKVxuICBcdFx0XHQuc3R5bGUoJ3N0cm9rZScsICdibGFjaycpXG4gIFx0XHRcdC5zdHlsZSgnc3Ryb2tlLXdpZHRoJywnMnB4Jyk7ICAgICAgXG5cbiAgXHQvLyBUZXh0IFxuICBcdGdycC5zZWxlY3RBbGwoJ3RleHQnKVxuXHQgICAgLmRhdGEoIChkKSA9PiBkKVxuXHQgICAgLmVudGVyKCkuYXBwZW5kKCd0ZXh0Jylcblx0ICAgIC5maWx0ZXIoKGQsaSkgPT4gaSUxMD09PTApXG5cdCAgICBcdC5hdHRyKCd4JywgKGQsIGkpID0+IHsgcmV0dXJuIDI4MCAqIGkrNTsgfSlcblx0ICAgIFx0LmF0dHIoJ3knLCAnMzgnKSAgXG5cdCAgICBcdC5hdHRyKCdmb250LWZhbWlseScsICdzYW5zLXNlcmlmJykgXG5cdCAgICBcdC50ZXh0KCAoZCwgaSxrKSA9PiBrKjQwK2kqMTArMSk7IFxufTtcblxuLy8gZ2V0IHZhbHVlc1xubGV0IGdldEJ1dHRvbklkcyA9ICgpID0+IFsnI2J0bi1yb3cxLTEnLCcjYnRuLXJvdzEtMicsJyNidG4tcm93MS0zJywnI2J0bi1yb3cxLTQnXTtcblxubGV0IHJlYWRJbnB1dCA9ICgpID0+IHtcblx0bGV0IGlkcyA9IGdldEJ1dHRvbklkcygpO1xuXHRsZXQgb3V0ID0gW107XG5cdGZvciAobGV0IGkgaW4gaWRzKSB7XG5cdFx0bGV0IHZhbCA9ICQoaWRzW2ldKVxuXHRcdFx0XHRcdFx0LnBhcmVudCgpXG5cdFx0XHRcdFx0XHQucGFyZW50KClcblx0XHRcdFx0XHRcdC5jaGlsZHJlbignaW5wdXQnKVswXS52YWx1ZTtcblx0XHRvdXQucHVzaCh2YWwpO1xuXHR9XG5cdHJldHVybiBvdXQ7XG59O1xuXG4vLyBSZWRyYXcgR2FtZVxubGV0IHJlZHJhdyA9IChpbnBzdHJhcnIpID0+IHtcblx0bGV0IGlucCA9IFtdO1xuXHQvLyBwYXJzZSBpbnB1dFxuXHRmb3IgKGxldCBpID0gMDsgaSA8IGlucHN0cmFyci5sZW5ndGg7IGkrKyl7XG5cdFx0aW5wLnB1c2gocGFyc2VJbnQoaW5wc3RyYXJyW2ldKSk7XG5cdH07XG5cbiAgICAvLyBpbml0IHZhbHVlc1xuXHRsZXQgdCA9IDEsIC8vIGNvdXQgdmFsdWVcblx0XHRkYXRhID0gW10sXG5cdFx0Y29sLFxuXHRcdG5leHRFdmVudCxcblx0XHR0bXAgPSAwO1xuXG5cdGZvciAobGV0IGkgPSAwOyBpIDwgaW5wLmxlbmd0aDsgaSsrKXtcblx0XHRjb2wgPSBpO1xuXHRcdG5leHRFdmVudCA9IGlucFtjb2xdO1xuXHRcdGlmIChuZXh0RXZlbnQgPiAwKXtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fVxuXG5cdGZvciAobGV0IGsgPSAwOyBrIDwgcm93TjsgayArPSAxKSB7XG5cdFx0bGV0IHJvdyA9IFtdO1xuXHRcdGRhdGEucHVzaChyb3cpO1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgY29sTjsgaSArPTEpe1xuXHRcdFx0aWYgKHQgPT09ICBuZXh0RXZlbnQpe1xuXHRcdFx0XHQvLyBqdW1wIG92ZXIgMCBjb2xvciBlbnRyaWVzXG5cdFx0XHRcdHRtcCA9IGNvbCsxOyAvLyBibGFjayBoYXMgaW5kZXggMFxuXHRcdFx0XHQvLyBpZiBzb21ldGhpbmcgaXMgemVybyBnbyBmdXJ0aGVyXG5cdFx0XHRcdHdoaWxlIChpbnBbKGNvbCsxKSVpbnAubGVuZ3RoXSA8IDEpe1xuXHRcdFx0XHRcdGNvbCA9IChjb2wrMSklaW5wLmxlbmd0aDtcblx0XHRcdFx0fVxuXHRcdFx0XHRuZXh0RXZlbnQgKz0gaW5wWyhjb2wrMSklaW5wLmxlbmd0aF07XG5cdFx0XHRcdGNvbCA9IChjb2wrMSklaW5wLmxlbmd0aDsgLy8gbmV4dCBjb2xvclxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dG1wID0gMDtcblx0XHRcdH1cblx0XHRcdHJvdy5wdXNoKFt0LCB0bXBdKTtcblx0XHRcdHQgPSB0ICsgMTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIGRhdGE7XG59XG5cblxubGV0IHJlZ2lzdGVySW5wdXRPbkNoYW5nZSA9ICgpID0+IHtcblx0bGV0IGlkcyA9IGdldEJ1dHRvbklkcygpO1xuXHRmb3IgKGxldCBpIGluIGlkcykge1xuXHRcdCQoaWRzW2ldKVxuXHRcdFx0LnBhcmVudCgpXG5cdFx0XHQucGFyZW50KClcblx0XHRcdC5jaGlsZHJlbignaW5wdXQuZm9ybS1jb250cm9sJylcblx0XHRcdC5jaGFuZ2UoKCkgPT4ge1xuXHRcdFx0XHRsZXQgbmV3ZGF0YSA9IHJlZHJhdyhyZWFkSW5wdXQoKSk7XG5cdFx0XHRcdHVwZGF0ZUdyYXBoKG5ld2RhdGEpO1xuXHRcdFx0fSk7XG5cdH1cbn07XG5cbi8vIExpc3RlbiBvbiBNZW51IGVudHJ5XG5sZXQgcmVnaXN0ZXJCdXR0b24gPSAoKSA9PiB7XG5cdGxldCBpZEFyciA9IGdldEJ1dHRvbklkcygpO1xuXHRsZXQgZWMgPSBqUXVlcnkuRXZlbnQoICdjaGFuZ2UnICk7XG4gICAgZm9yIChsZXQgaSBpbiBpZEFycikge1xuICAgIFx0JChpZEFycltpXSlcblx0XHRcdC5wYXJlbnQoKVxuXHRcdFx0LmNoaWxkcmVuKCd1bC5kcm9wZG93bi1tZW51Jylcblx0XHRcdC5vbignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0XHQkKGlkQXJyW2ldKVxuXHRcdFx0XHQucGFyZW50KClcblx0XHRcdFx0LnBhcmVudCgpXG5cdFx0XHRcdC5jaGlsZHJlbignaW5wdXQuZm9ybS1jb250cm9sJylcblx0XHRcdFx0LmF0dHIoJ3ZhbHVlJyxlLnRhcmdldC50ZXh0KVxuXHRcdFx0XHQvL3NlbmQgY2hhbmdlIGV2ZW50XG5cdFx0XHRcdC50cmlnZ2VyKGVjKTtcblx0XHR9KTtcdFxuICAgIH1cbn07XG5cbmxldCByZWdpc3RlclBsYXlCdXR0b24gPSAoKSA9PiB7XG5cdCQoJyNwbGF5bXVzaWNidG4nKS5vbignY2xpY2snLCAoZSkgPT4ge1xuXHRcdHJ1blNlcSA9IHRydWU7XG5cdFx0cGxheU11c2ljKCk7XG5cdFx0Ly9hbGVydCgnaGVyZScpO1xuXHR9KTtcbn07XG5cblxubGV0IHJlZ2lzdGVyU3RvcEJ1dHRvbiA9ICgpID0+IHtcblx0JCgnI3N0b3BtdXNpY2J0bicpLm9uKCdjbGljaycsIChlKSA9PiB7XG5cdFx0cnVuU2VxID0gZmFsc2U7XG5cdFx0Ly9hbGVydCgnaGVyZScpO1xuXHR9KTtcbn07XG5cbi8vIFNvdW5kIERlZmluaXRpb25cbmxldCBydW5TZXEgPSB0cnVlO1xuXG5sZXQgcGxheVNvdW5kID0gKHN0YXJ0VGltZSwgcGl0Y2gsIGR1cmF0aW9uLCBnYWluKSA9PiB7XG5cdC8vbGV0IHN0YXJ0VGltZSA9IGF1ZGlvQ29udGV4dC5jdXJyZW50VGltZSArIGRlbGF5O1xuICBcdGxldCBlbmRUaW1lID0gc3RhcnRUaW1lICsgZHVyYXRpb247XG5cbiAgXHRsZXQgb3V0Z2FpbiA9IGF1ZGlvQ29udGV4dC5jcmVhdGVHYWluKCk7XG4gIFx0b3V0Z2Fpbi5nYWluLnZhbHVlID0gZ2FpbjtcbiAgXHRvdXRnYWluLmNvbm5lY3QoYXVkaW9Db250ZXh0LmRlc3RpbmF0aW9uKTtcbiAgXHRcblxuICBcdGxldCBlbnZlbG9wZSA9IGF1ZGlvQ29udGV4dC5jcmVhdGVHYWluKCk7XG4gIFx0ZW52ZWxvcGUuY29ubmVjdChvdXRnYWluKTtcbiAgXHRlbnZlbG9wZS5nYWluLnZhbHVlID0gMDtcbiAgXHRlbnZlbG9wZS5nYWluLnNldFRhcmdldEF0VGltZSgxLCBzdGFydFRpbWUsIDAuMSk7XG4gIFx0ZW52ZWxvcGUuZ2Fpbi5zZXRUYXJnZXRBdFRpbWUoMCwgZW5kVGltZSwgMC4yKTtcblxuICBcdGxldCBvc2NpbGxhdG9yID0gYXVkaW9Db250ZXh0LmNyZWF0ZU9zY2lsbGF0b3IoKTtcbiAgXHRvc2NpbGxhdG9yLmNvbm5lY3QoZW52ZWxvcGUpO1xuICBcblx0bGV0IHZpYnJhdG8gPSBhdWRpb0NvbnRleHQuY3JlYXRlR2FpbigpO1xuXHR2aWJyYXRvLmdhaW4udmFsdWUgPSAzMDtcblx0dmlicmF0by5jb25uZWN0KG9zY2lsbGF0b3IuZGV0dW5lKTtcblxuXG5cdGxldCBsZm8gPSBhdWRpb0NvbnRleHQuY3JlYXRlT3NjaWxsYXRvcigpO1xuXHRsZm8uY29ubmVjdCh2aWJyYXRvKTtcblx0bGZvLmZyZXF1ZW5jeS52YWx1ZSA9NTsgXG5cbiAgXHRvc2NpbGxhdG9yLnR5cGUgPSAnc2F3dG9vdGgnO1xuICBcdG9zY2lsbGF0b3IuZGV0dW5lLnZhbHVlID0gcGl0Y2ggKiAxMDA7XG4gIFx0b3NjaWxsYXRvci5mcmVxdWVuY3kudmFsdWUgPSAxMDA7XG5cbiAgXHRvc2NpbGxhdG9yLnN0YXJ0KHN0YXJ0VGltZSk7XG4gIFx0bGZvLnN0YXJ0KHN0YXJ0VGltZSk7XG4gIFx0b3NjaWxsYXRvci5zdG9wKGVuZFRpbWUgKyAyKTtcbiAgXHRsZm8uc3RvcChlbmRUaW1lICsgMik7XG59O1xuXG4vLy8gUGxheSBMb29wXG5sZXQgcnVuU2VxdWVuY2VycyA9ICgpID0+IHtcblx0aWYgKCFydW5TZXEgfHwgc291bmRRdWV1ZS5sZW5ndGggPT09IDApe2NvbnNvbGUubG9nKFwic3RvcFwiKTtyZXR1cm47fVxuXHRsZXQgY3QgPSBhdWRpb0NvbnRleHQuY3VycmVudFRpbWU7XG5cdHdoaWxlIChzb3VuZFF1ZXVlLmxlbmd0aD4wICYmIHNvdW5kUXVldWVbMF1bMF08IGN0KzAuMTUpe1xuXHRcdC8vY29uc29sZS5sb2coJ2N0OicrY3QrJ3BsYW5lZCB0aW1lOicrc291bmRRdWV1ZVswXVswXSk7XG5cdFx0bGV0IHRvbmUgPSBzb3VuZFF1ZXVlLnNwbGljZSgwLDEpO1xuXHRcdHBsYXlTb3VuZCh0b25lWzBdWzBdLHRvbmVbMF1bMV0sdG9uZVswXVsyXSx0b25lWzBdWzNdKTtcblxuXHR9XG5cdHNldFRpbWVvdXQocnVuU2VxdWVuY2Vycyw5MCk7XG59XG5cblxuLy8vIHNvdW5kcyBzdGFydCBoZXJlXG4vLy8gU291bmQgdmFyXG5sZXQgc291bmRRdWV1ZSA9IFtdO1xubGV0IGF1ZGlvQ29udGV4dCA9IG5ldyBBdWRpb0NvbnRleHQoKTtcbmxldCBzb3VuZFNwZWVkID0gMC4zO1xubGV0IHNvdW5kcyA9IFtbLTEwLCAwLjUsMC4zXSxbMywgMC41LDAuN10sWzEwLCAwLjUsMC43XSxbMTUsIDAuNSwwLjddLFswLCAwLjUsMC43XV07XG5cblxuXG4vLy8gU291bmQgTWV0aG9kc1xubGV0IHBsYXlNdXNpYyA9ICgpID0+IHtcblxuXHQvLyBmaWxsIHNvdW5kUXVldWVcbiAgICBcblx0XG5cdGxldCByZWN0YXJyID0gZDMuc2VsZWN0QWxsKCdyZWN0JykuZGF0YSgpO1xuICAgIGxldCBzdGFydFRpbWUgPSBhdWRpb0NvbnRleHQuY3VycmVudFRpbWU7XG4gICAgLy9jb25zb2xlLmxvZygnU3RhcnQnK3N0YXJ0VGltZSk7XG4gICAgc291bmRRdWV1ZSA9W107XG5cdGZvciAobGV0IGk9MDsgaSA8IHJlY3RhcnIubGVuZ3RoOyBpKyspIHtcblx0XHRsZXQgdiA9IHJlY3RhcnJbaV1bMV07XG5cdFx0Ly9wbGF5U291bmQoaSxzb3VuZHNbdl1bMF0sc291bmRzW3ZdWzFdLHNvdW5kc1t2XVsyXSk7XG5cdFx0Ly9hbGVydChpKTtcblx0XHRsZXQgdG1wID0gW107XG5cdFx0dG1wLnB1c2goaSpzb3VuZFNwZWVkK3N0YXJ0VGltZSk7XG5cdFx0dG1wLnB1c2goc291bmRzW3ZdWzBdKTtcblx0XHR0bXAucHVzaCgwLjIpO1xuXHRcdHRtcC5wdXNoKHNvdW5kc1t2XVsyXSk7XG5cdFx0c291bmRRdWV1ZS5wdXNoKHRtcCk7XG5cdH1cblxuXHQvL2NvbnNvbGUubG9nKCdzdGFydHNlcXVlbmNlcicrYXVkaW9Db250ZXh0LmN1cnJlbnRUaW1lKTtcbiAgICBydW5TZXF1ZW5jZXJzKCk7XG59O1xuXG5cblxuLy8gSW5pdCBTY3JlZW5cblx0bGV0IHdpZHRoID0gMTIzMCxcbiAgICBoZWlnaHQgPSA0MDAsXG4gICAgZGl2ID0gZDMuc2VsZWN0KCcjY2hhcnQnKSxcbiAgICBzdmcgPSBkaXYuYXBwZW5kKCdzdmcnKVxuICAgICAgICAuYXR0cignd2lkdGgnLCB3aWR0aClcbiAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGhlaWdodCksXG4gICAgLy9ncmlkICAgIFxuICAgIHJ3ID0gMjAsXG4gICAgcmggPSAyMCxcbiAgICByb3dOID00LFxuICAgIGNvbE4gPTQwLFxuICAgIC8vY29sb3JkZWZpbml0aW9uXG4gICAgbG9va3VwID0gWydibGFjaycsJyMyOTZFQUEnLCcjRDQzRjNBJywnIzVDQjg1QycsJyM0NkIwQ0YnXSxcbiAgICBycmFuZ2UgPSBsb29rdXAubGVuZ3RoO1xuXG5cdC8vIFJlYWN0IG9uIENoYW5nZXMgb2YgdGhlIGlucHV0IGZpZWxkc1xuXG5cdHJlZ2lzdGVyQnV0dG9uKCk7XG5cdHJlZ2lzdGVySW5wdXRPbkNoYW5nZSgpO1xuXHRsZXQgbXlkYXRhID0gcmVkcmF3KHJlYWRJbnB1dCgpKTtcblx0cmVuZGVyR3JhcGgobXlkYXRhKTtcblx0cmVnaXN0ZXJQbGF5QnV0dG9uKCk7XG5cdHJlZ2lzdGVyU3RvcEJ1dHRvbigpO1xuXG5cblxuXG59KTtcblxuXG5cbiJdfQ==
