/**
 * soundOmath
 * Playing Sound App
 * Compiled: Wed Feb 10 2016 10:33:31 GMT+0100 (CET)
 * @version v0.3.0
 * @link https://github.com/mgje
 * @copyright MIT
 */
!function t(n,e,r){function i(o,u){if(!e[o]){if(!n[o]){var l="function"==typeof require&&require;if(!u&&l)return l(o,!0);if(a)return a(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var d=e[o]={exports:{}};n[o][0].call(d.exports,function(t){var e=n[o][1][t];return i(e?e:t)},d,d.exports,t,n,e,r)}return e[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,n,e){"use strict";$(document).ready(function(){var t=[{nr:0,gain:.2,vol:"20%",color:"#757575",hover:"#000000",instrument:"D3",id:"ig-row1-0",visible:!0},{nr:1,gain:.8,vol:"20%",color:"#296EAA",hover:"#094E8A",instrument:"A4",id:"ig-row1-1",visible:!0},{nr:2,gain:0,vol:"0%",color:"#5491B5",hover:"#346175",instrument:"F3",id:"ig-row1-2",visible:!1},{nr:3,gain:0,vol:"0%",color:"#79BEFA",hover:"#599EBA",instrument:"G3",id:"ig-row1-3",visible:!1},{nr:4,gain:.5,vol:"40%",color:"#4BA84B",hover:"#2B882B",instrument:"D4",id:"ig-row2-1",visible:!0},{nr:5,gain:0,vol:"0%",color:"#547249",hover:"#245219",instrument:"B4",id:"ig-row2-2",visible:!1},{nr:6,gain:0,vol:"0%",color:"#1F6241",hover:"#1F6241",instrument:"C4",id:"ig-row2-3",visible:!1},{nr:7,gain:.3,vol:"80%",color:"#DB3833",hover:"#AB1813",instrument:"G4",id:"ig-row3-1",visible:!0},{nr:8,gain:0,vol:"0%",color:"#B30B0B",hover:"#530B0B",instrument:"E4",id:"ig-row3-2",visible:!1},{nr:9,gain:0,vol:"0%",color:"#A1123F",hover:"#51021F",instrument:"F4",id:"ig-row3-3",visible:!1}],n={D3:{freq:440,detune:-700},E3:{freq:440,detune:-500},F3:{freq:440,detune:-400},G3:{freq:440,detune:-200},A4:{freq:440,detune:0},B4:{freq:440,detune:200},C4:{freq:440,detune:300},D4:{freq:440,detune:500},E4:{freq:440,detune:700},F4:{freq:440,detune:800},G4:{freq:440,detune:1e3}},e={1:{visible:!0,data:!0},2:{visible:!0,addrow:!1,minrow:!1,data:!0,changerowid:"addrow2"},3:{visible:!0,addrow:!1,redrow:!1,data:!0,changerowid:"addrow3"},4:{data:!0},archild:'<div><i class="fa fa-plus-square"></i><span>Ton-Zahlenreihe</span></div>',minrowchild:'<div><i class="fa fa-minus-square"></i><span>Ton-Zahlenreihe</span></div>',addbttn:'<span class="glyphicon glyphicon-plus"></span>',minbttn:'<span class="glyphicon glyphicon-minus"></span>'},r=20,i=20,a=1,o=48,u=function(t,n,e,a){if(a){var o=n.selectAll("svg g").data(t),u=o.selectAll("g").data(function(t){return t});u.exit().remove(),u.enter().append("g").attr("transform",function(t,n){return"translate("+28*n+",0)"});var l=u.selectAll("rect").data(function(t){return t});l.exit().remove(),l.attr("fill",function(t,n){return e[t]}).attr("x",function(n,e,i){return r/t[0][i].length*e}).attr("width",function(n,e,i){return r/t[0][i].length}).enter().append("rect").attr("fill",function(t,n){return e[t]}).attr("x",function(n,e,i){return r/t[0][i].length*e}).attr("width",function(n,e,i){return r/t[0][i].length}).attr("height",i)}else n.selectAll("svg g rect").data(t[0]).attr("fill",function(t,n){return e[t]}).enter().append("rect").attr("x",function(t,n){return 28*n}).attr("width",r).attr("height",i)},l=function(t,n,e,a){var o=n.selectAll("svg g").data(t).enter().append("g").attr("transform",function(t,n){return"translate(0, "+54*n+")"});if(a){var u=o.selectAll("g").data(function(t){return t}).enter().append("g").attr("transform",function(t,n){return"translate("+28*n+",0)"});u.selectAll("rect").data(function(t){return t}).enter().append("rect").attr("x",function(n,e,i){return r/t[0][i].length*e}).attr("fill",function(t,n){return e[t]}).attr("width",function(n,e,i){return r/t[0][i].length}).attr("height",i)}else o.selectAll("rect").data(function(t){return t}).enter().append("rect").attr("x",function(t,n){return 28*n}).attr("fill",function(t,n){return e[t]}).attr("width",r).attr("height",i);o.selectAll("line").data(function(t){var n=Math.trunc(t.length/10),e=new Array(n+1).fill(0);return e}).enter().append("line").attr("x1",function(t,n){return 280*n+1}).attr("y1",20).attr("x2",function(t,n){return 280*n+1}).attr("y2",40).style("stroke","black").style("stroke-width","2px"),o.selectAll("text").data(function(t){var n=Math.trunc(t.length/10),e=new Array(n+1).fill(0);return e}).enter().append("text").attr("x",function(t,n){return 280*n+5}).attr("y","38").attr("font-family","sans-serif").text(function(t,n,e){return 40*e+10*n+1})},c=function(t){var n=[];"undefined"==typeof t&&alert("row is undefined");for(var e="",r=1;4>r;r++)e="#btn-row"+t+"-"+r,n.push(e);var i=[];for(var r in n){var a=$(n[r]).parent().parent().children("input")[0],o=0;"undefined"!=typeof a&&(o=a.value),i.push(o)}return i},d=function(t,n,e){var r=[],i=[];i.push(r);for(var a=void 0,o=void 0,u=0;u<t.length;u++)a=[],a.push(t[u]),a.push(0===n[u]?0:n[u]+3),a.push(0===e[u]?0:e[u]+6),o=new Set(a),o.size>1&&o.has(0)&&o["delete"](0),r.push(Array.from(o));return i},s=function(t){for(var n=[],e=0;e<t.length;e++)n.push(parseInt(t[e]));for(var r=1,i=[],u=void 0,l=void 0,c=0,e=0;e<n.length&&(u=e,l=n[u],!(l>0));e++);for(var d=0;a>d;d+=1){var s=[];i.push(s);for(var e=0;o>e;e+=1){if(r===l){for(c=u+1;n[(u+1)%n.length]<1;)u=(u+1)%n.length;l+=n[(u+1)%n.length],u=(u+1)%n.length}else c=0;s.push(c),r+=1}}return i},f=function(t,n,e,r){$(t).attr("fill",r),setTimeout(function(){$(t).attr("fill",n)},1e3*e)},v=function(n,e,r){for(var i=[],a="",o=1;4>o;o++)a="#btn-row"+n+"-"+o,i.push(a);for(var o in i)$(i[o]).parent().parent().children("input.form-control").change(function(){var i=s(c(n));u(i,e,r,!1);var a=s(c(1)),o=s(c(2)),l=s(c(3)),f=d(a[0],o[0],l[0]);u(f,d3.select("#chart-sum"),[0,1,2,3,4,5,6,7,8,9].map(function(n){return t[n].color}),!0)})},h=function(t){for(var n=[],e="",r=void 0,i=1;4>i;i++)e="#btn-row"+t+"-"+i,n.push(e);for(var i in n)r=$(n[i]).parent().children("ul.dropdown-menu"),$(r).on("click",function(t){var n=t.target.parentElement.parentElement.parentElement.parentElement.children[1];n.setAttribute("value",t.target.text),$(n).val(t.target.text),$(n).trigger(jQuery.Event("change"))})},p=function(n){for(var e=[],r="",i=1;4>i;i++)r="#btn-row"+n+"-"+i+"-ton",e.push(r);for(var i in e)$(e[i]).parent().children("ul.dropdown-menu").on("click",function(n){var e=parseInt(n.target.parentElement.parentElement.getAttribute("nr"));t[e].instrument=n.target.text,A(t,e)})},g=function(){$("#btn-row0-0-ton").parent().children("ul.dropdown-menu").on("click",function(n){t[0].instrument=n.target.text,A(t,0)})},w=function(n){for(var e=[],r="",i=1;4>i;i++)r="#btn-row"+n+"-"+i+"-volume",e.push(r);for(var i in e)$(e[i]).parent().children("ul.dropdown-menu").on("click",function(n){var e=parseInt(n.target.parentElement.parentElement.getAttribute("nr"));t[e].vol=n.target.text,t[e].gain=1*parseInt(n.target.text)/100,A(t,e)})},m=function(){$("#btn-row0-0-volume").parent().children("ul.dropdown-menu").on("click",function(n){t[0].vol=n.target.text,t[0].gain=1*parseInt(n.target.text)/100,A(t,0)})},b=function(t,n){if(t.children().length<2){var e=document.createElement("span");e.appendChild(document.createTextNode(n)),t.append(e)}else t.children().last().text(n)},A=function(t,n){var e=void 0,r=void 0;1>n?(e=0,r=n):(e=Math.trunc((n-1)/3)+1,r=(n-1)%3+1);var i=$("#btn-row"+e+"-"+r+"-ton"),a=" "+t[n].instrument;b(i,a),i=$("#btn-row"+e+"-"+r+"-volume"),a=" "+t[n].vol,b(i,a)},y=function(t){for(var n=0;n<t.length;n++)A(t,n)},x=function(){$("#playmusicbtn").on("click",function(t){T=!0,O()})},E=function(){$("#stopmusicbtn").on("click",function(t){T=!1})},q=function(){for(var n=void 0,e=1;4>e;e++)n="btn-row"+e+"-2-add",$("#"+n).on("click",function(n){var e=void 0,r=2,i=n.target.getAttribute("action");("undefined"==typeof i||null===i)&&(i=n.target.parentElement.getAttribute("action"));var a=i.split("");e=3*(parseInt(a[1])-1)+r,"+"===a[0]&&(t[e].visible=!0,$("#"+t[e].id).show()),"-"===a[0]&&(t[e].visible=!1,$("#"+t[e].id).hide()),U()}),n="btn-row"+e+"-3-add",$("#"+n).on("click",function(n){var e=void 0,r=3,i=n.target.getAttribute("action");("undefined"==typeof i||null===i)&&(i=n.target.parentElement.getAttribute("action"));var a=i.split("");e=3*(parseInt(a[1])-1)+r,"+"===a[0]&&(t[e].visible=!0,$("#"+t[e].id).show()),"-"===a[0]&&(t[e].visible=!1,$("#"+t[e].id).hide()),U()})},B=function(e,r,i,a){var o=e+i,u=t[r].gain,l=C.createGain();l.gain.value=u,l.connect(C.destination);var c=C.createGain();c.connect(l),c.gain.value=0,c.gain.setTargetAtTime(1,e,j[0]),c.gain.setTargetAtTime(0,o,j[1]);var d=C.createOscillator();d.connect(c),d.type=Q,d.detune.value=n[t[r].instrument].detune,d.frequency.value=240;var s=C.createGain();s.gain.value=M,s.connect(d.detune);var f=C.createOscillator();f.connect(s),f.frequency.value=N,d.start(e),f.start(e),d.stop(o+2),f.stop(o+2)},k=function rt(){if(!T||0===F.length)return void console.log("stop");for(var n=C.currentTime;F.length>0&&F[0][0]<n+.15;){var e=F.splice(0,1);B(e[0][0],e[0][1],e[0][2],t[e[0][1]].gain),f(e[0][3],t[e[0][1]].color,e[0][2],t[e[0][1]].hover)}setTimeout(rt,90)},T=!0,F=[],C=null;try{window.AudioContext=window.AudioContext||window.webkitAudioContext;var C=new AudioContext}catch(I){console.log("No Web Audio API support")}$("body").on("touchend",function(t){var n=C.createBuffer(1,1,22050),e=C.createBufferSource();e.buffer=n,e.connect(C.destination),"undefined"!=typeof e.noteOn&&e.noteOn(0);var r=null;r=C.createOscillator(),r.type="square",r.frequency.value=440,r.connect(C.destination);var i=C.currentTime;r.start(i+.02),r.stop(i+.05),$("body").on("touchend",function(t){})});var O=function(){var t=void 0,n=d3.select("#chart-sum").select("g").selectAll("g").data(),e=d3.select("#chart-sum").select("g").selectAll("g")[0],r=C.currentTime;F=[];for(var i=0;i<n.length;i++){var a=n[i];for(t=0;t<a.length;t++){var o=[];o.push(i*D+r+1e-4*t),o.push(a[t]),o.push(G),o.push(d3.select(e[i]).selectAll("rect")[0][t]),F.push(o)}}k()},D=.5,G=.3,M=.3,j=[.01,.1],N=6,Q="sawtooth",z=function(n){var e=[1,2,3].map(function(t){return 3*(n-1)+t}),r=e.map(function(n){return t[n].visible}),i=r.filter(function(t){return t===!0});return i.length},S=function(t,n,e){$("#"+t).attr("action",e).children().replaceWith(n)},U=function(){for(var n=void 0,r=void 0,i=void 0,a=void 0,o=void 0,u=1;4>u;u++)switch(n=z(u)){case 1:r="btn-row"+u+"-2-add",S(r,e.addbttn,"+"+u),$("#"+r).show(),$("#btn-row"+u+"-3-add").hide(),i=3*u,a=$("#"+t[i].id),"undefined"!=typeof a.children("input")[0]&&(o=a.children("input")[0],o.value=0,$(o).trigger(jQuery.Event("change"))),a=$("#"+t[i-1].id),"undefined"!=typeof a.children("input")[0]&&(o=a.children("input")[0],o.value=0,$(o).trigger(jQuery.Event("change")));break;case 2:r="btn-row"+u+"-2-add",S(r,e.minbttn,"-"+u),$("#"+r).show(),r="btn-row"+u+"-3-add",S(r,e.addbttn,"+"+u),$("#"+r).show(),i=3*u,a=$("#"+t[i].id),"undefined"!=typeof a.children("input")[0]&&(o=a.children("input")[0],o.value=0,$(o).trigger(jQuery.Event("change")));break;case 3:$("#btn-row"+u+"-2-add").hide(),r="btn-row"+u+"-3-add",S(r,e.minbttn,"-"+u),$("#"+r).show()}},W=function(t){t.map(function(t){if(t.visible)$("#"+t.id).show();else{var n=$("#"+t.id);n.hide(),"undefined"!=typeof n.children("input")[0]&&(n.children("input")[0].value=0)}})},Z=function(t){var n=1280,e=45,r="0 0 "+(n+70)+" "+e,i=d3.select(t),a=i.append("svg").attr("width",n).attr("height",e).attr("viewBox",r).attr("preserveAspectRatio","xMidYMid meet");return a};W(t),y(t),U();var _=Z("#chart"),L=[0,1,2,3].map(function(n){return t[n].color}),P=s(c(1));l(P,_,L,!1);var R=Z("#chart-2"),Y=[0,4,5,6].map(function(n){return t[n].color}),H=s(c(2));l(H,R,Y,!1);var J=Z("#chart-3"),K=[0,7,8,9].map(function(n){return t[n].color}),V=s(c(3));l(V,J,K,!1);var X=Z("#chart-sum"),tt=[0,1,2,3,4,5,6,7,8,9].map(function(n){return t[n].color}),nt=d(P[0],H[0],V[0]);l(nt,X,tt,!0),d3.select(window).on("resize",function(){var t=$(window).width();_.attr("width",t),R.attr("width",t),J.attr("width",t),X.attr("width",t)});var et=$(window).width();_.attr("width",et),R.attr("width",et),J.attr("width",et),X.attr("width",et),m(),g(),[1,2,3].map(h),[1,2,3].map(p),[1,2,3].map(w),v(1,_,L),v(2,R,Y),v(3,J,K),q(),x(),E()})},{}]},{},[1]);