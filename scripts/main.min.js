/**
 * soundOmath
 * Playing Sound App
 * Compiled: Sat Oct 15 2016 00:01:28 GMT+0200 (CEST)
 * @version v0.3.0
 * @link https://github.com/mgje
 * @copyright MIT
 */
!function t(n,e,r){function i(a,u){if(!e[a]){if(!n[a]){var c="function"==typeof require&&require;if(!u&&c)return c(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var d=e[a]={exports:{}};n[a][0].call(d.exports,function(t){var e=n[a][1][t];return i(e?e:t)},d,d.exports,t,n,e,r)}return e[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,n,e){"use strict";$(document).ready(function(){var t=[{nr:0,gain:.2,vol:"20%",color:"#757575",hover:"#000000",instrument:"D3",id:"ig-row1-0",visible:!0},{nr:1,gain:.8,vol:"20%",color:"#296EAA",hover:"#094E8A",instrument:"A4",id:"ig-row1-1",visible:!0},{nr:2,gain:0,vol:"0%",color:"#5491B5",hover:"#346175",instrument:"F3",id:"ig-row1-2",visible:!1},{nr:3,gain:0,vol:"0%",color:"#79BEFA",hover:"#599EBA",instrument:"G3",id:"ig-row1-3",visible:!1},{nr:4,gain:.5,vol:"40%",color:"#4BA84B",hover:"#2B882B",instrument:"D4",id:"ig-row2-1",visible:!0},{nr:5,gain:0,vol:"0%",color:"#547249",hover:"#245219",instrument:"B4",id:"ig-row2-2",visible:!1},{nr:6,gain:0,vol:"0%",color:"#1F6241",hover:"#1F6241",instrument:"C4",id:"ig-row2-3",visible:!1},{nr:7,gain:.3,vol:"80%",color:"#DB3833",hover:"#AB1813",instrument:"G4",id:"ig-row3-1",visible:!0},{nr:8,gain:0,vol:"0%",color:"#B30B0B",hover:"#530B0B",instrument:"E4",id:"ig-row3-2",visible:!1},{nr:9,gain:0,vol:"0%",color:"#A1123F",hover:"#51021F",instrument:"F4",id:"ig-row3-3",visible:!1}],n={D3:{freq:440,detune:-700},E3:{freq:440,detune:-500},F3:{freq:440,detune:-400},G3:{freq:440,detune:-200},A4:{freq:440,detune:0},B4:{freq:440,detune:200},C4:{freq:440,detune:300},D4:{freq:440,detune:500},E4:{freq:440,detune:700},F4:{freq:440,detune:800},G4:{freq:440,detune:1e3}},e={1:{visible:!0,graph:"chart",data:!0},2:{visible:!0,graph:"chart-2",addrow:!1,redrow:!0,data:!0,changerowid:"addrow2"},3:{visible:!1,graph:"chart-3",addrow:!0,redrow:!1,data:!0,changerowid:"addrow3"},4:{visible:!0,graph:"chart-sum",data:!0},archild:'<div action="plus"><i class="fa fa-plus-square"></i><span>Ton-Zahlenreihe</span></div>',minrowchild:'<div action="minus"><i class="fa fa-minus-square"></i><span>Ton-Zahlenreihe</span></div>',addbttn:'<span class="glyphicon glyphicon-plus"></span>',minbttn:'<span class="glyphicon glyphicon-minus"></span>'},r=function(t,n){for(var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=[],i=t;i<n;i+=e)r.push(i);return r},i=20,o=20,a=1,u=48,c=function(t,n,e,r){if(r){var a=n.selectAll("svg g").data(t),u=a.selectAll("g").data(function(t){return t});u.exit().remove(),u.enter().append("g").attr("transform",function(t,n){return"translate("+28*n+",0)"});var c=u.selectAll("rect").data(function(t){return t});c.exit().remove(),c.attr("fill",function(t,n){return e[t]}).attr("x",function(n,e,r){return i/t[0][r].length*e}).attr("width",function(n,e,r){return i/t[0][r].length}).enter().append("rect").attr("fill",function(t,n){return e[t]}).attr("x",function(n,e,r){return i/t[0][r].length*e}).attr("width",function(n,e,r){return i/t[0][r].length}).attr("height",o)}else n.selectAll("svg g rect").data(t[0]).attr("fill",function(t,n){return e[t]}).enter().append("rect").attr("x",function(t,n){return 28*n}).attr("width",i).attr("height",o)},l=function(t,n,e,r){var a=n.selectAll("svg g").data(t).enter().append("g").attr("transform",function(t,n){return"translate(0, "+54*n+")"});if(r){var u=a.selectAll("g").data(function(t){return t}).enter().append("g").attr("transform",function(t,n){return"translate("+28*n+",0)"});u.selectAll("rect").data(function(t){return t}).enter().append("rect").attr("x",function(n,e,r){return i/t[0][r].length*e}).attr("fill",function(t,n){return e[t]}).attr("width",function(n,e,r){return i/t[0][r].length}).attr("height",o)}else a.selectAll("rect").data(function(t){return t}).enter().append("rect").attr("x",function(t,n){return 28*n}).attr("fill",function(t,n){return e[t]}).attr("width",i).attr("height",o);a.selectAll("line").data(function(t){var n=Math.trunc(t.length/10),e=new Array(n+1).fill(0);return e}).enter().append("line").attr("x1",function(t,n){return 280*n+1}).attr("y1",20).attr("x2",function(t,n){return 280*n+1}).attr("y2",40).style("stroke","black").style("stroke-width","2px"),a.selectAll("text").data(function(t){var n=Math.trunc(t.length/10),e=new Array(n+1).fill(0);return e}).enter().append("text").attr("x",function(t,n){return 280*n+5}).attr("y","38").attr("font-family","sans-serif").text(function(t,n,e){return 40*e+10*n+1})},d=function(t){var n=[1,2,3].map(function(n){return"#btn-row"+t+"-"+n}),e=[],r=void 0,i=void 0;return n.forEach(function(t){r=$(t).parent().parent().children("input")[0],i="undefined"!==r?r.value:0,e.push(i)}),e},f=function(t,n,e){var r=[],i=[];i.push(r);for(var o=void 0,a=void 0,u=0;u<t.length;u++)o=[],o.push(t[u]),o.push(0===n[u]?0:n[u]+3),o.push(0===e[u]?0:e[u]+6),a=new Set(o),a.size>1&&a.has(0)&&a["delete"](0),r.push(Array.from(a));return i},s=function(t){for(var n=[],e=0;e<t.length;e++)n.push(parseInt(t[e]));for(var r=1,i=[],o=void 0,c=void 0,l=0,d=0;d<n.length&&(o=d,c=n[o],!(c>0));d++);for(var f=0;f<a;f+=1){var s=[];i.push(s);for(var h=0;h<u;h+=1){if(r===c){for(l=o+1;n[(o+1)%n.length]<1;)o=(o+1)%n.length;c+=n[(o+1)%n.length],o=(o+1)%n.length}else l=0;s.push(l),r+=1}}return i},h=function(t,n,e,r){$(t).attr("fill",r),setTimeout(function(){$(t).attr("fill",n)},1e3*e)},v=function(n,e,r){var i=[1,2,3].map(function(t){return"#btn-row"+n+"-"+t});i.forEach(function(i){$(i).parent().parent().children("input.form-control").change(function(){var i=s(d(n));c(i,e,r,!1);var o=s(d(1)),a=s(d(2)),u=s(d(3)),l=f(o[0],a[0],u[0]);c(l,K[3],[0,1,2,3,4,5,6,7,8,9].map(function(n){return t[n].color}),!0)})})},p=function(t){var n=[1,2,3].map(function(n){return"#btn-row"+t+"-"+n});n.forEach(function(t){$(t).parent().children("ul.dropdown-menu").on("click",function(t){var n=t.target.parentElement.parentElement.parentElement.parentElement.children[1];n.setAttribute("value",t.target.text),$(n).val(t.target.text),$(n).trigger(jQuery.Event("change"))})})},g=function(n){var e=[1,2,3].map(function(t){return"#btn-row"+n+"-"+t+"-ton"});e.forEach(function(n){$(n).parent().children("ul.dropdown-menu").on("click",function(n){var e=parseInt(n.target.parentElement.parentElement.getAttribute("nr"));t[e].instrument=n.target.text,y(t,e)})})},w=function(){$("#btn-row0-0-ton").parent().children("ul.dropdown-menu").on("click",function(n){t[0].instrument=n.target.text,y(t,0)})},m=function(n){var e=[1,2,3].map(function(t){return"#btn-row"+n+"-"+t+"-volume"});e.forEach(function(n){$(n).parent().children("ul.dropdown-menu").on("click",function(n){var e=parseInt(n.target.parentElement.parentElement.getAttribute("nr"));t[e].vol=n.target.text,t[e].gain=1*parseInt(n.target.text)/100,y(t,e)})})},b=function(){$("#btn-row0-0-volume").parent().children("ul.dropdown-menu").on("click",function(n){t[0].vol=n.target.text,t[0].gain=1*parseInt(n.target.text)/100,y(t,0)})},A=function(t,n){if(t.children().length<2){var e=document.createElement("span");e.appendChild(document.createTextNode(n)),t.append(e)}else t.children().last().text(n)},y=function(t,n){var e=void 0,r=void 0;n<1?(e=0,r=n):(e=Math.trunc((n-1)/3)+1,r=(n-1)%3+1);var i=$("#btn-row"+e+"-"+r+"-ton"),o=" "+t[n].instrument;A(i,o),i=$("#btn-row"+e+"-"+r+"-volume"),o=" "+t[n].vol,A(i,o)},E=function(t){for(var n=0;n<t.length;n++)y(t,n)},x=function(){$("#playmusicbtn").on("click",function(t){I=!0,G()})},q=function(){$("#stopmusicbtn").on("click",function(t){I=!1})},B=function(){var n=[1,2,3].map(function(t){return"#btn-row"+t+"-2-add"});n.forEach(function(n){$(n).on("click",function(n){var e=void 0,r=2,i=n.target.getAttribute("action");"undefined"!=typeof i&&null!==i||(i=n.target.parentElement.getAttribute("action"));var o=i.split("");e=3*(parseInt(o[1])-1)+r,"+"===o[0]&&(t[e].visible=!0,$("#"+t[e].id).show()),"-"===o[0]&&(t[e].visible=!1,$("#"+t[e].id).hide()),R()})}),n=[1,2,3].map(function(t){return"#btn-row"+t+"-3-add"}),n.forEach(function(n){$(n).on("click",function(n){var e=void 0,r=3,i=n.target.getAttribute("action");"undefined"!=typeof i&&null!==i||(i=n.target.parentElement.getAttribute("action"));var o=i.split("");e=3*(parseInt(o[1])-1)+r,"+"===o[0]&&(t[e].visible=!0,$("#"+t[e].id).show()),"-"===o[0]&&(t[e].visible=!1,$("#"+t[e].id).hide()),R()})})},k=function(){["addrow2","addrow3"].forEach(function(t){$("#"+t).on("click",function(n){var r=$(n.target).children("div"),i=void 0;i=r.length>0?r[0].getAttribute("action"):n.target.parentElement.getAttribute("action");var o=t.split("")[6];"plus"===i&&(e[o].visible=!0,e[o].addrow=!1,e[o].redrow=!0,"3"===o&&(e[2].redrow=!1),"2"===o&&(e[3].addrow=!0)),"minus"===i&&(e[o].visible=!1,e[o].addrow=!0,e[o].redrow=!1,"2"===o&&(e[3].addrow=!1),"3"===o&&(e[2].redrow=!0)),P(),L()})})},T=function(e,r,i,o){var a=e+i,u=t[r].gain,c=O.createGain();c.gain.value=u,c.connect(O.destination);var l=O.createGain();l.connect(c),l.gain.value=0,l.gain.setTargetAtTime(1,e,N[0]),l.gain.setTargetAtTime(0,a,N[1]);var d=O.createOscillator();d.connect(l),d.type=S,d.detune.value=n[t[r].instrument].detune,d.frequency.value=240;var f=O.createGain();f.gain.value=Q,f.connect(d.detune);var s=O.createOscillator();s.connect(f),s.frequency.value=W,d.start(e),s.start(e),d.stop(a+2),s.stop(a+2)},F=function st(){if(!I||0===C.length)return void console.log("stop");for(var n=O.currentTime;C.length>0&&C[0][0]<n+.15;){var e=C.splice(0,1);T(e[0][0],e[0][1],e[0][2],t[e[0][1]].gain),h(e[0][3],t[e[0][1]].color,e[0][2],t[e[0][1]].hover)}setTimeout(st,90)},I=!0,C=[],O=null;try{window.AudioContext=window.AudioContext||window.webkitAudioContext;var O=new AudioContext}catch(D){console.log("No Web Audio API support")}$("body").on("touchend",function(t){var n=O.createBuffer(1,1,22050),e=O.createBufferSource();e.buffer=n,e.connect(O.destination),"undefined"!=typeof e.noteOn&&e.noteOn(0);var r=null;r=O.createOscillator(),r.type="square",r.frequency.value=440,r.connect(O.destination);var i=O.currentTime;r.start(i+.05),r.stop(i+.06),$("body").unbind("touchend")});var G=function(){var t=void 0,n=d3.select("#chart-sum").select("g").selectAll("g").data(),e=d3.select("#chart-sum").select("g").selectAll("g")[0],r=O.currentTime;C=[];for(var i=0;i<n.length;i++){var o=n[i];for(t=0;t<o.length;t++){var a=[];a.push(i*M+r+1e-4*t),a.push(o[t]),a.push(j),a.push(d3.select(e[i]).selectAll("rect")[0][t]),C.push(a)}}F()},M=.5,j=.3,Q=.3,N=[.01,.1],W=6,S="sawtooth",z=function(n){var e=[1,2,3].map(function(t){return 3*(n-1)+t}),r=e.map(function(n){return t[n].visible}),i=r.filter(function(t){return t===!0});return i.length},U=function(t,n,e){$(t).attr("action",e).children().replaceWith(n)},Z=function(n){for(var e=void 0,r=void 0,i=J[n-1][0];i<J[n-1][1];i++)e=$("#"+t[i].id),e.hide(),[2,3].forEach(function(t){$("#btn-row"+n+"-"+t+"-add").hide()}),"undefined"!=typeof e.children("input")[0]&&(r=e.children("input")[0],r.value=0,$(r).trigger(jQuery.Event("change")))},_=function(n){$("#btn-row"+n+"-1-add").show();var e=J[n-1][0];$("#"+t[e].id).show()},L=function(){["2","3"].forEach(function(t){e[t].addrow&&($("#"+e[t].changerowid).children("div").replaceWith(e.archild),$("#"+e[t].changerowid).show()),e[t].redrow&&($("#"+e[t].changerowid).children("div").replaceWith(e.minrowchild),$("#"+e[t].changerowid).show()),e[t].redrow||e[t].addrow||$("#"+e[t].changerowid).hide()})},P=function(){var t="";["2","3"].forEach(function(n){t="#"+e[n].graph,e[n].visible?($(t).show(),_(parseInt(n)),R()):($(t).hide(),Z(parseInt(n)))})},R=function(){var n=void 0,r=void 0,i=void 0;[1,2,3].forEach(function(o){if(e[o].visible)switch(n=z(o)){case 1:U("#btn-row"+o+"-2-add",e.addbttn,"+"+o),$("#btn-row"+o+"-2-add").show(),$("#btn-row"+o+"-3-add").hide(),r=$("#"+t[3*o].id),"undefined"!=typeof r.children("input")[0]&&(i=r.children("input")[0],i.value=0,$(i).trigger(jQuery.Event("change"))),r=$("#"+t[3*o-1].id),"undefined"!=typeof r.children("input")[0]&&(i=r.children("input")[0],i.value=0,$(i).trigger(jQuery.Event("change")));break;case 2:U("#btn-row"+o+"-2-add",e.minbttn,"-"+o),$("#btn-row"+o+"-2-add").show(),U("#btn-row"+o+"-3-add",e.addbttn,"+"+o),$("#btn-row"+o+"-3-add").show(),r=$("#"+t[3*o].id),"undefined"!=typeof r.children("input")[0]&&(i=r.children("input")[0],i.value=0,$(i).trigger(jQuery.Event("change")));break;case 3:$("#btn-row"+o+"-2-add").hide(),U("#btn-row"+o+"-3-add",e.minbttn,"-"+o),$("#btn-row"+o+"-3-add").show()}})},Y=function(t){t.map(function(t){if(t.visible)$("#"+t.id).show();else{var n=$("#"+t.id);n.hide(),"undefined"!=typeof n.children("input")[0]&&(n.children("input")[0].value=0)}})},H=function(t){var n=1280,e=45,r="0 0 "+(n+70)+" "+e,i=d3.select(t),o=i.append("svg").attr("width",n).attr("height",e).attr("viewBox",r).attr("preserveAspectRatio","xMidYMid meet");return o};Y(t),E(t),R();var J=[[1,4],[4,7],[7,10],[1,10]],K=[],V=[],X=null,tt=[],nt=null,et=null,rt=void 0,it=void 0,ot=$(window).width();for(rt=1;rt<5;rt++){X=H("#"+e[""+rt].graph),X.attr("width",ot),K.push(X),tt=[0];var at=!0,ut=!1,ct=void 0;try{for(var lt,dt=r(J[rt-1][0],J[rt-1][1])[Symbol.iterator]();!(at=(lt=dt.next()).done);at=!0)it=lt.value,tt.push(it)}catch(ft){ut=!0,ct=ft}finally{try{!at&&dt["return"]&&dt["return"]()}finally{if(ut)throw ct}}nt=tt.map(function(n){return t[n].color}),rt<4?(et=s(d(rt)),V.push(et),v(rt,X,nt),l(et,X,nt,!1)):(et=f(V[0][0],V[1][0],V[2][0]),l(et,X,nt,!0))}d3.select(window).on("resize",function(){for(var t=$(window).width(),n=0;n<K.length;n++)K[n].attr("width",t)}),b(),w(),[1,2,3].forEach(function(t){return p(t)}),[1,2,3].forEach(function(t){return g(t)}),[1,2,3].forEach(function(t){return m(t)}),B(),k(),x(),q(),P(),L()})},{}]},{},[1]);